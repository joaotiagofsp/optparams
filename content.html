<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M10 from src/site/markdown/content.md at 2023-05-10
 | Rendered using Apache Maven Fluido Skin 2.0.0-M6
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M10" />
    <title>Apache Maven – OptParams</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M6.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><img src="https://portal.cin.ufpe.br/wp-content/uploads/2020/07/HC-1.png"  alt="OptParams" style="height: 80px;" /></div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-05-10<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.0-SNAPSHOT<span class="divider">|</span></li>
      <li><a href="../" title="Ref">Ref</a><span class="divider">/</span></li>
      <li><a href="./" title="Maven 1.0.0-SNAPSHOT">Maven 1.0.0-SNAPSHOT</a><span class="divider">/</span></li>
    <li class="active ">OptParams <a href="${project.scm.url}/src/site/markdown/content.md"><img src="./images/accessories-text-editor.png" title="Edit" /></a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="projeto.html" title="Projeto"><span class="none"></span>Projeto</a></li>
    <li><a href="bnf.html" title="BNF"><span class="none"></span>BNF</a></li>
    <li><a href="jjdoc/index.html" title="Gramática JavaCC"><span class="none"></span>Gramática JavaCC</a></li>
   <li class="nav-header">Development</li>
    <li><a href="apidocs/index.html" title="Javadocs"><span class="none"></span>Javadocs</a></li>
    <li><a href="https://github.com/joaotiagofsp/optparams" class="externalLink" title="Github project"><span class="none"></span>Github project</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h1>OptParams</h1>
<p>Projeto da disciplina Paradigmas de Linguagens de Programa&#xe7;&#xe3;o (IN1007) - Cin/UFPE</p><section>
<h2>Equipe</h2>
<ul>

<li>Cleber Tavares de Moura | <a href="mailto:ctm@cin.ufpe.br" class="externalLink">ctm@cin.ufpe.br</a></li>
<li>Jo&#xe3;o Tiago Ferreira Soares Pessoa | <a href="mailto:jtfsp@cin.ufpe.br" class="externalLink">jtfsp@cin.ufpe.br</a></li>
</ul></section><section>
<h2>Contextualiza&#xe7;&#xe3;o</h2>
<p>Um Fun&#xe7;&#xe3;o com par&#xe2;metros opcionais deve ser executada mesmo que parte dos seus argumentos de entrada n&#xe3;o tenha sido passada na chamada da mesma.
No caso em que um argumento n&#xe3;o &#xe9; passado, a Fun&#xe7;&#xe3;o assume um valor default e segue a sua execu&#xe7;&#xe3;o.</p></section><section>
<h2>Escopo do Projeto</h2>
<p><strong>Estender a Linguagem Funcional 1</strong> apresentada na disciplina para que a declara&#xe7;&#xe3;o de fun&#xe7;&#xf5;es ofere&#xe7;a a possibilidade de <strong>tornar um par&#xe2;metro opcional e definir um valor default para o mesmo</strong>.</p>

<div class="verbatim">
<pre><code>let fun soma a(1) b(2) = a + b
</code></pre></div>
<p>Os blocos <code>(1)</code> e <code>(2)</code> tornam os par&#xe2;metros da fun&#xe7;&#xe3;o opcionais e definem o valor default caso um valor n&#xe3;o seja expressamente informado na chamada da fun&#xe7;&#xe3;o.</p></section><section>
<h2>BNF</h2>
<p>Ainda em constru&#xe7;&#xe3;o&#x2026;</p>

<div class="verbatim">
<pre><code>Programa ::= Expressao

Expressao ::= Valor
	| ExpUnaria
	| ExpBinaria
	| ExpDeclaracao
	| Id
	| Aplicacao
	| IfThenElse

ExpUnaria ::= &quot;-&quot; Expressao 
		| &quot;not&quot; Expressao 
		| &quot;length&quot; Expressao

ExpBinaria ::= Expressao &quot;+&quot; Expressao
		| Expressao &quot;-&quot; Expressao
		| Expressao &quot;and&quot; Expressao
		| Expressao &quot;or&quot; Expressao
		| Expressao &quot;==&quot; Expressao
		| Expressao &quot;++&quot; Expressao

ExpDeclaracao ::= &quot;let&quot; DeclaracaoFuncional &quot;in&quot; Expressao

Valor ::= ValorConcreto

ValorConcreto ::= ValorInteiro 
		| ValorBooleano 
		| ValorString
      		| ValorFuncao	&lt;&lt;--------------------------- ALTERA&#xc7;&#xc3;O

ValorFuncao ::= &quot;fn&quot; ListParametro &quot;.&quot; Expressao  &lt;&lt;--------- ALTERA&#xc7;&#xc3;O

DeclaracaoFuncional ::= DecVariavel
			| DecFuncao
			| DecComposta

DecVariavel ::= &quot;var&quot; Id &quot;=&quot; Expressao

DecFuncao ::= &quot;fun&quot; ListParametro &quot;=&quot; Expressao	&lt;&lt;----------- ALTERA&#xc7;&#xc3;O

DecComposta ::= DeclaracaoFuncional &quot;,&quot; DeclaracaoFuncional

Parametro ::= ParametroObrigatorio   &lt;&lt;---------------------- ALTERA&#xc7;&#xc3;O 
		| ParametroOpcional

ParametroObrigatorio ::= Id   &lt;&lt;----------------------------- ALTERA&#xc7;&#xc3;O

ParametroOpcional ::= Id &quot;?&quot; &quot;(&quot; Expressao &quot;)&quot;	&lt;&lt;----------- ALTERA&#xc7;&#xc3;O

ListId ::= Id  
	|  Id ListId

Aplicacao:= Id&quot;(&quot; ListExp &quot;)&quot;

ListExp ::= Expressao  
	|  Expressao, ListExp

ListParametro ::= Parametro	&lt;&lt;--------------------------- ALTERA&#xc7;&#xc3;O
		|  Parametro ListParametro

IfThenElse ::= &quot;if&quot; Expressao &quot;then&quot; Expressao &quot;else&quot; Expressao
</code></pre></div></section><section>
<h2>Extens&#xf5;es realizadas em LF1</h2>
<ol style="list-style-type: decimal">

<li>Implementa&#xe7;&#xe3;o da classe <code>ParametroFuncao</code></li>
</ol>

<div class="verbatim">
<pre><code class="language-java">public class ParametroFuncao {
	private Id id;
	private Valor valorDefault;

	public ParametroFuncao(Id id, Valor valorDefault) {
		this.id = id;
		this.valorDefault = valorDefault;
	}

	@Override
	public String toString() {
		return &quot;ParametroFuncao [id=&quot; + id + &quot;, valorDefault=&quot; + valorDefault + &quot;]&quot;;
	}

	public Id getId() {
		return id;
	}

	public void setId(Id id) {
		this.id = id;
	}

	public Valor getValorDefault() {
		return valorDefault;
	}

	public void setValorDefault(Valor valorDefault) {
		this.valorDefault = valorDefault;
	}
	
	public ParametroFuncao clone() {
		return this;
	}

}
</code></pre></div>
<ol style="list-style-type: decimal">

<li>Modifica&#xe7;&#xe3;o nas classes <code>DefFuncao</code>, <code>TipoFuncao</code>, <code>Aplicacao</code> e <code>DecFuncao</code></li>
</ol>

<div class="verbatim">
<pre><code class="language-java">public class DefFuncao {
	
	// TIPO DA LISTA ATUALIZADO
	protected List&lt;ParametroFuncao&gt; args;

	protected Expressao exp;

	public DefFuncao(List&lt;ParametroFuncao&gt; args, Expressao exp) {
		this.args = args;
		this.exp = exp;
	}

	public List&lt;ParametroFuncao&gt; getListaParametros() {
		return args;
	}

	public Expressao getExp() {
		return exp;
	}

	public int getAridade() {
		return args.size();
	}

	public boolean checaTipo(AmbienteCompilacao ambiente)
			throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		ambiente.incrementa();

		for (*ParametroFuncao* arg : args) {
			ambiente.map(*arg.getId()*, new TipoPolimorfico());
		}

		boolean result = exp.checaTipo(ambiente);

		ambiente.restaura();

		return result;
	}

	public Tipo getTipo(AmbienteCompilacao ambiente)
			throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		ambiente.incrementa();

		for (ParametroFuncao arg : args) {
			ambiente.map(arg.getId(), new TipoPolimorfico());
		}
		exp.checaTipo(ambiente);

		// Compoe o tipo desta funcao do resultado para o primeiro parametro.
		Tipo result = exp.getTipo(ambiente);

		// Obtem o tipo inferido de cada parametro.
		List&lt;Tipo&gt; params = new ArrayList&lt;Tipo&gt;(getAridade());
		Tipo argTipo;
		for (int i = 0; i &lt; getAridade(); i++) {
			argTipo = ((TipoPolimorfico) ambiente.get(args.get(i).getId())).inferir();
			params.add(argTipo);
		}
		result = new TipoFuncao(params, result);

		ambiente.restaura();

		return result;
	}

	public DefFuncao clone() {
		List&lt;ParametroFuncao&gt; novaLista = new ArrayList&lt;ParametroFuncao&gt;(this.args.size());

		for (ParametroFuncao arg : this.args) {
			novaLista.add(arg.clone());
		}

		return new DefFuncao(novaLista, this.exp.clone());
	}
}
</code></pre></div>

<div class="verbatim">
<pre><code class="language-java">public class TipoFuncao implements Tipo {

	private List&lt;Tipo&gt; dominio;

	private Tipo imagem;

	public TipoFuncao(List&lt;Tipo&gt; dominio, Tipo imagem) {
		this.dominio = dominio;
		this.imagem = imagem;
	}

	public String getNome() {
		return String.format(&quot;(%s) -&gt; %s&quot;, ToStringProvider.listToString(dominio, &quot; x&quot;), imagem);
	}

	public List&lt;Tipo&gt; getDominio() {
		return dominio;
	}

	public Tipo getImagem() {
		return imagem;
	}

	public boolean eBooleano() {
		return imagem.eBooleano();
	}

	public boolean eInteiro() {
		return imagem.eInteiro();
	}

	public boolean eString() {
		return imagem.eString();
	}

	public boolean eValido() {
		boolean ret = dominio != null;
		for (Tipo t : this.dominio) {
			ret &amp;= t.eValido();
		}
		ret &amp;= imagem != null &amp;&amp; imagem.eValido();
		return ret;
	}

	public boolean eIgual(Tipo tipo) {
		boolean ret = true;
		if (tipo instanceof TipoPolimorfico)
			return tipo.eIgual(this);

		if (tipo instanceof TipoFuncao) {
			TipoFuncao tipoFuncao = (TipoFuncao) tipo;
			if (this.dominio.size() != tipoFuncao.dominio.size())
				return false;
			Iterator&lt;Tipo&gt; it = this.dominio.iterator();
			for (Tipo t : tipoFuncao.dominio) {
				ret &amp;= t.eIgual(it.next());
			}
			return ret &amp;&amp; this.imagem.eIgual(tipoFuncao.imagem);
		}

		return ret;
	}

	public Tipo intersecao(Tipo outroTipo) {
		if (outroTipo.eIgual(this))
			return this;
		else
			return null;
	}

	@Override
	public String toString() {
		return getNome();
	}

	private void limparTiposCuringas() {
		for (Tipo tDom : getDominio()) {
			if (tDom instanceof TipoPolimorfico) {
				((TipoPolimorfico) tDom).limpar();
			}

		}
		if (getImagem() instanceof TipoPolimorfico) {
			((TipoPolimorfico) getImagem()).limpar();
		}
	}

	/**
	 * METODO ALTERADO PARA ACEITAR UMA QUANTIDADE DE ARGUMENTOS NA
	 * CHAMADA DA FUNCAO MENOR OU IGUAL AO NUMERO DE PARAMETROS DA SUA DECLARACAO
	 * 
	 * @param parametrosFormais
	 * @return
	 */
	private boolean checkArgumentListSize(List&lt;? extends Expressao&gt; parametrosFormais) {
		// ALTERADO PARA PERMITIR QUE A FUN&#xc7;&#xc3;O RECEBA MENOS ARGUMENTOS DO QUE CONSTA NA DEFINI&#xc7;&#xc3;O
		return getDominio().size() &gt;= parametrosFormais.size();
	}

	private boolean checkArgumentTypes(AmbienteCompilacao ambiente, List&lt;? extends Expressao&gt; parametrosFormais)
			throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		boolean result = true;

		Iterator&lt;Tipo&gt; it = getDominio().iterator();
		Tipo tipoArg;
		if (parametrosFormais != null) {
			for (Expressao valorReal : parametrosFormais) {
	
				result &amp;= valorReal.checaTipo(ambiente);
	
				tipoArg = valorReal.getTipo(ambiente);
				Tipo tipoDom = it.next();
	
				result &amp;= tipoArg.eIgual(tipoDom);
			}
		}
		return result;
	}

	public boolean checaTipo(AmbienteCompilacao ambiente, List&lt;? extends Expressao&gt; parametrosFormais) {
		boolean result = checkArgumentListSize(parametrosFormais) &amp;&amp; checkArgumentTypes(ambiente, parametrosFormais);
		limparTiposCuringas();
		return result;
	}

	public Tipo getTipo(AmbienteCompilacao ambiente, List&lt;? extends Expressao&gt; parametrosFormais) {
		// Infere os parametros
		Iterator&lt;Tipo&gt; it = getDominio().iterator();
		Tipo tipoArg;
		for (Expressao valorReal : parametrosFormais) {
			tipoArg = valorReal.getTipo(ambiente);
			tipoArg.eIgual(it.next());
		}

		// Obtem o resultado.
		Tipo ret = getImagem();
		// Caso seja um tipo polimorfico procura a mais especifica instanciacao.
		while (ret instanceof TipoPolimorfico) {
			if (((TipoPolimorfico) ret).getTipoInstanciado() == null) {
				break;
			}
			ret = ((TipoPolimorfico) ret).getTipoInstanciado();
		}

		limparTiposCuringas();
		return ret;
	}

}
</code></pre></div>

<div class="verbatim">
<pre><code class="language-java">public class Aplicacao implements Expressao {

	private Id func;
	private List&lt;? extends Expressao&gt; argsExpressao;

	public Aplicacao(Id f, Expressao... expressoes) {
		this(f, Arrays.asList(expressoes));
	}

	public Aplicacao(Id f, List&lt;? extends Expressao&gt; expressoes) {
		func = f;
		argsExpressao = expressoes;
	}

	public Valor avaliar(AmbienteExecucao ambiente) throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		AmbienteExecucaoFuncional ambienteFuncional = (AmbienteExecucaoFuncional) ambiente;

		DefFuncao funcao;
		try {
			funcao = ambienteFuncional.getFuncao(func);
		} catch (IdentificadorNaoDeclaradoException e) {
			throw new VariavelJaDeclaradaException(func);
		}

		Map&lt;Id, Valor&gt; mapIdValor = resolveParametersBindings(ambiente, funcao);

		ambiente.incrementa();

		includeValueBindings(ambiente, mapIdValor);

		Valor vresult = funcao.getExp().avaliar(ambiente);
		ambiente.restaura();
		return vresult;
	}

	public boolean checaTipo(AmbienteCompilacao ambiente)
			throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		boolean result;
		Tipo aux = ambiente.get(func);

		if (aux instanceof TipoFuncao) {
			TipoFuncao tipoFuncao = (TipoFuncao) aux;

			result = tipoFuncao.checaTipo(ambiente, argsExpressao);
		} else {
			// A funcao func nao foi declarada.

			// TODO: lancar uma excecao ou separar variaveis de funcoes no
			// contexto de compilacao.

			result = false;
		}
		return result;
	}

	public List&lt;? extends Expressao&gt; getArgsExpressao() {
		return argsExpressao;
	}

	public Id getFunc() {
		return func;
	}

	public Tipo getTipo(AmbienteCompilacao ambiente)
			throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		TipoFuncao tipoFuncao = (TipoFuncao) ambiente.get(func);
		return tipoFuncao.getTipo(ambiente, argsExpressao);
	}

	private void includeValueBindings(AmbienteExecucao ambiente, Map&lt;Id, Valor&gt; mapIdValor)
			throws VariavelJaDeclaradaException {
		for (Map.Entry&lt;Id, Valor&gt; mapeamento : mapIdValor.entrySet()) {
			Id id = mapeamento.getKey();
			Valor valor = mapeamento.getValue();
			ambiente.map(id, valor);
		}
	}

	/**
	 * METODO ALTERADO PARA COLOCAR NO MAP OS VALORES DEFAULT DOS PARAMETROS QDO OS
	 * ARGUMENTOS NAO SAO PASSADOS
	 * 
	 * @param ambiente
	 * @param funcao
	 * @return
	 * @throws VariavelNaoDeclaradaException
	 * @throws VariavelJaDeclaradaException
	 */
	private Map&lt;Id, Valor&gt; resolveParametersBindings(AmbienteExecucao ambiente, DefFuncao funcao)
			throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		List&lt;ParametroFuncao&gt; parametrosId = funcao.getListaParametros();
		List&lt;? extends Expressao&gt; expressoesValorReal = argsExpressao;

		Map&lt;Id, Valor&gt; mapIdValor = new HashMap&lt;Id, Valor&gt;();

		if (expressoesValorReal == null) {
			for (ParametroFuncao param : parametrosId) {
				mapIdValor.put(param.getId(), param.getValorDefault().avaliar(ambiente));
			}
		} else {
			Iterator&lt;? extends Expressao&gt; iterExpressoesValor = expressoesValorReal.iterator();
			for (ParametroFuncao param : parametrosId) {
				if (iterExpressoesValor.hasNext()) {
					mapIdValor.put(param.getId(), iterExpressoesValor.next().avaliar(ambiente));
				} else {
					mapIdValor.put(param.getId(), param.getValorDefault().avaliar(ambiente));
				}
			}
		}

		return mapIdValor;
	}

	@Override
	public String toString() {
		return String.format(&quot;%s(%s)&quot;, func, ToStringProvider.listToString(argsExpressao, &quot;,&quot;));
	}

	public Expressao reduzir(AmbienteExecucao ambiente) {
		// TODO Auto-generated method stub
		return null;
	}

	public Aplicacao clone() {
		Aplicacao retorno;
		ArrayList&lt;Expressao&gt; novaLista = new ArrayList&lt;Expressao&gt;(this.argsExpressao.size());

		Iterator&lt;? extends Expressao&gt; iterator = argsExpressao.iterator();
		while (iterator.hasNext()) {
			Expressao exp = iterator.next();
			novaLista.add(exp.clone());
		}

		retorno = new Aplicacao(this.func.clone(), novaLista);

		return retorno;
	}
}
</code></pre></div>

<div class="verbatim">
<pre><code class="language-java">public class DecFuncao implements DeclaracaoFuncional {

	private Id id;

	private DefFuncao funcao;

	public DecFuncao(Id idFun, List&lt;ParametroFuncao&gt; args, Expressao exp) {
		this.id = idFun;
		this.funcao = new DefFuncao(args, exp);
	}

	public Id getId() {
		return id;
	}

	public List&lt;ParametroFuncao&gt; getListaParametros() {
		return funcao.getListaParametros();
	}

	public Expressao getExpressao() {
		return funcao.getExp();
	}

	public int getAridade() {
		return funcao.getAridade();
	}

	public DefFuncao getFuncao() {
		return funcao;
	}

	@Override
	public String toString() {
		return String.format(&quot;fun %s (%s) = %s&quot;, id, ToStringProvider.listToString(funcao.getListaParametros(), &quot;,&quot;),
				funcao.getExp());
	}

	public boolean checaTipo(AmbienteCompilacao ambiente)
			throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		ambiente.incrementa();

		List&lt;Tipo&gt; params = new ArrayList&lt;Tipo&gt;(getAridade());
		for (int i = 0; i &lt; getAridade(); i++) {
			params.add(new TipoPolimorfico());
		}
		Tipo tipo = new TipoFuncao(params, new TipoPolimorfico());
		// Mapeia a propria funcao no ambiente para permitir recursao.
		ambiente.map(id, tipo);

		boolean result = funcao.checaTipo(ambiente);
		ambiente.restaura();
		return result;
	}

	public Tipo getTipo(AmbienteCompilacao amb) throws VariavelNaoDeclaradaException, VariavelJaDeclaradaException {
		amb.incrementa();

		List&lt;Tipo&gt; params = new ArrayList&lt;Tipo&gt;(getAridade());
		for (int i = 0; i &lt; getAridade(); i++) {
			params.add(new TipoPolimorfico());
		}
		Tipo tipo = new TipoFuncao(params, new TipoPolimorfico());
		amb.map(id, tipo);

		Tipo result = funcao.getTipo(amb);
		amb.restaura();
		return result;
	}

	public DecFuncao clone() {
		DefFuncao aux = this.funcao.clone();
		return new DecFuncao(this.id.clone(), aux.getListaParametros(), aux.getExp());
	}

	public void elabora(AmbienteCompilacao amb, Map&lt;Id, Tipo&gt; tipos) throws VariavelJaDeclaradaException {
		tipos.put(getId(), getTipo(amb));
	}

	public void incluir(AmbienteCompilacao amb, Map&lt;Id, Tipo&gt; tipos) throws VariavelJaDeclaradaException {
		amb.map(getId(), tipos.get(getId()));

	}

	public void elabora(AmbienteExecucaoFuncional amb, Map&lt;Id, Valor&gt; declaracoes,
			Map&lt;Id, DefFuncao&gt; declaracoesFuncoes) throws VariavelJaDeclaradaException {
		declaracoesFuncoes.put(getId(), getFuncao());
	}

	public void incluir(AmbienteExecucaoFuncional amb, Map&lt;Id, Valor&gt; declaracoes,
			Map&lt;Id, DefFuncao&gt; declaracoesFuncoes) throws VariavelJaDeclaradaException {
		amb.mapFuncao(getId(), declaracoesFuncoes.get(getId()));
	}

}
</code></pre></div>
<ol style="list-style-type: decimal">

<li>Modifica&#xe7;&#xe3;o das regras de produ&#xe7;&#xe3;o <code>PListaId()</code>, <code>PDeclFuncao()</code> e <code>PAplicacao()</code></li>
</ol>

<div class="verbatim">
<pre><code>List PListaId() :
{
  Id id;
  ParametroFuncao param;
  Valor valorDefault;
  List &lt; ParametroFuncao &gt; retorno = null;
}
{
  (
    ///////////////////////////////////////////////////////////////////////////////
    // ALTERADA A ESTRUTURA DA DECLARACAO DA FUNCAO PARA INCLUIR VALORES DEFAULT //
    ///////////////////////////////////////////////////////////////////////////////
    id = PId() &lt; LPAREN &gt; valorDefault = PValor() &lt; RPAREN &gt;
    {
      if (retorno == null)
      {
        retorno = new ArrayList &lt; ParametroFuncao &gt; ();
        retorno.add(new ParametroFuncao(id, valorDefault));
      }
      else
      {
        retorno.add(new ParametroFuncao(id, valorDefault));
      }
    }
  )*
  {
    return retorno;
  }
}
</code></pre></div>

<div class="verbatim">
<pre><code>DeclaracaoFuncional PDeclFuncao() :
{
  Id id;
  Expressao expressao;
  DeclaracaoFuncional retorno;
  /////////////////////////////////////////////////
  ///   ALTERADO O TIPO DOS ELEMENTOS DA LISTA  ///
  /////////////////////////////////////////////////
  List &lt; ParametroFuncao &gt; lista;
}
{
  (
    &lt; FUNC &gt; id = PId() lista = PListaId() &lt; ASSIGN &gt; expressao = PExpressao()
  )
  {
    return new DecFuncao(id, lista, expressao);
  }
}
</code></pre></div>

<div class="verbatim">
<pre><code>Expressao PAplicacao() :
{
  List expressoes = null;
  Expressao expressao;
  Id id;
}
{
  id = PId() &lt; LPAREN &gt;
  (
     expressao = PExpressao()
    {
      expressoes = new ArrayList();
      expressoes.add(expressao);
    }
    (
      &lt; COMMA &gt; expressao = PExpressao()
      {
        expressoes.add(expressao);
      }
    )*
    
  )*
  &lt; RPAREN &gt;
  {
    return new Aplicacao(id, expressoes);
  }
}
</code></pre></div></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2023
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>